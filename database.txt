create database NHOM5_C#5_5
use NHOM5_C#5
go
-- Product
CREATE TABLE Product(
ID UNIQUEIDENTIFIER PRIMARY KEY DEFAULT NEWID(),
TenSP NVARCHAR(50) DEFAULT NULL,
NhaSanXuat NVARCHAR(50) DEFAULT NULL,
TheLoai NVARCHAR(50) DEFAULT NULL,
NgaySanXuat DATE DEFAULT NULL,
BaoHanh date DEFAULT NULL,
Series INT DEFAULT NULL,
DoPhanGiai VARCHAR(50) DEFAULT NULL,
CongNgheManHinh NVARCHAR(50) DEFAULT NULL,
TrangThai NVARCHAR(50) DEFAULT NULL
)
GO
--Color
CREATE TABLE Color(
ID UNIQUEIDENTIFIER PRIMARY KEY DEFAULT NEWID(),
Ma VARCHAR(20) UNIQUE,
Ten NVARCHAR(50) DEFAULT NULL,
)
GO
--Size
CREATE TABLE Size(
ID UNIQUEIDENTIFIER PRIMARY KEY DEFAULT NEWID(),
Ma VARCHAR(20) UNIQUE,
Size NVARCHAR(50) DEFAULT NULL,
)
GO
--ProductDetails
CREATE TABLE ProductDetails(
ID UNIQUEIDENTIFIER PRIMARY KEY DEFAULT NEWID(),
IDProduct UNIQUEIDENTIFIER,
IDColor UNIQUEIDENTIFIER,
IDSize UNIQUEIDENTIFIER,
BaoHanh DATE DEFAULT NULL,
MoTa NVARCHAR(50) DEFAULT NULL,
SoLuongTon INT DEFAULT NULL,
GiaNhap FLOAT DEFAULT NULL,
GiaBan FLOAT DEFAULT NULL,
TrangThaiKhuyenMai NVARCHAR(50) DEFAULT NULL
)
GO
--CartDetails
CREATE TABLE CartDetails(
ID UNIQUEIDENTIFIER PRIMARY KEY DEFAULT NEWID(),
IDProductDetails UNIQUEIDENTIFIER,
DonGia FLOAT DEFAULT NULL,
SoLuong FLOAT DEFAULT NULL
)
GO
--Cart
CREATE TABLE Cart(
ID UNIQUEIDENTIFIER PRIMARY KEY DEFAULT NEWID(),
IDKhachHang UNIQUEIDENTIFIER,
IDCartDetails UNIQUEIDENTIFIER,
SoLuong INT DEFAULT NULL,
DonGia FLOAT DEFAULT NULL,
NgayTao DATE DEFAULT NULL
)
GO
--KhachHang
CREATE TABLE KhachHang(
ID UNIQUEIDENTIFIER PRIMARY KEY DEFAULT NEWID(),
IDTichDiem UNIQUEIDENTIFIER,
Ten NVARCHAR(50) DEFAULT NULL,
SDT NVARCHAR(12)  DEFAULT NULL,
MatKhau VARCHAR(20)  DEFAULT NULL,
DiaChi NVARCHAR(50) DEFAULT NULL,
)
GO
--ChiTietTichDiem
CREATE TABLE ChiTietTichDiem(
ID UNIQUEIDENTIFIER PRIMARY KEY DEFAULT NEWID(),
SoDiemTich INT DEFAULT NULL,
TrangThai NVARCHAR(50) DEFAULT NULL
)
GO
--UuDaiTichDiem
CREATE TABLE UuDaiTichDiem(
ID UNIQUEIDENTIFIER PRIMARY KEY DEFAULT NEWID(),
IDChiTietTichDiem UNIQUEIDENTIFIER,
IDTichDiem UNIQUEIDENTIFIER,
IDCart UNIQUEIDENTIFIER,
SoDiemDung int DEFAULT NULL,
NgayTich DATE DEFAULT NULL,
TrangThai NVARCHAR(50) DEFAULT NULL
)
GO
--TichDiem
CREATE TABLE TichDiem(
ID UNIQUEIDENTIFIER PRIMARY KEY DEFAULT NEWID(),
SoDiem INT DEFAULT NULL,
)
GO
--ChucVu
CREATE TABLE ChucVu(
ID UNIQUEIDENTIFIER PRIMARY KEY DEFAULT NEWID(),
TenChucVu NVARCHAR(50) DEFAULT NULL,
)
GO
--NhanVien
CREATE TABLE NhanVien(
ID UNIQUEIDENTIFIER PRIMARY KEY DEFAULT NEWID(),
IDChucVu UNIQUEIDENTIFIER,
Ma VARCHAR(20) DEFAULT NULL,
HoTen NVARCHAR(50) DEFAULT NULL,
SDT NVARCHAR(20) DEFAULT NULL,
MatKhau VARCHAR(20) DEFAULT NULL,
DiaChi NVARCHAR(100) DEFAULT NULL,
GioiTinh NVARCHAR(10) DEFAULT NULL,
Ngaysinh DATE DEFAULT NULL,
)
GO
--Bill
CREATE TABLE Bill(
ID UNIQUEIDENTIFIER PRIMARY KEY DEFAULT NEWID(),
IDKhachHang UNIQUEIDENTIFIER,
IDUuDaiTichDiem UNIQUEIDENTIFIER,
IDBillDetails UNIQUEIDENTIFIER,
IDNhanVien UNIQUEIDENTIFIER,
NgayThanhToan DATE DEFAULT NULL,
GiamGia NVARCHAR(50) DEFAULT NULL,
MoTa NVARCHAR(100) DEFAULT NULL,
TongTien FLOAT DEFAULT NULL,
SoTienGiam FLOAT DEFAULT NULL,
TienKhachDua FLOAT DEFAULT NULL,
TrangThai NVARCHAR(50) DEFAULT NULL
)
GO
--BillDetails
CREATE TABLE BillDetails(
ID UNIQUEIDENTIFIER PRIMARY KEY DEFAULT NEWID(),
IDProductDetails UNIQUEIDENTIFIER,
SoLuong INT DEFAULT NULL,
DonGia FLOAT DEFAULT NULL,
TrangThai NVARCHAR(50) DEFAULT NULL
)
GO

--NhanVien - ChucVu
ALTER TABLE NhanVien ADD FOREIGN KEY (IDChucVu) REFERENCES ChucVu(ID)
--Bill - NhanVien
ALTER TABLE Bill ADD FOREIGN KEY (IDNhanVien) REFERENCES NhanVien(ID)
--Bill - BillDetails
ALTER TABLE Bill ADD FOREIGN KEY (IDBillDetails) REFERENCES BillDetails(ID)
--Bill - KhachHang
ALTER TABLE Bill ADD FOREIGN KEY (IDKhachHang) REFERENCES KhachHang(ID)
--Bill - UuDaiTichDiem
ALTER TABLE Bill ADD FOREIGN KEY (IDUuDaiTichDiem) REFERENCES UuDaiTichDiem(ID)
--BillDetails - ProductDetails
ALTER TABLE BillDetails ADD FOREIGN KEY (IDProductDetails) REFERENCES ProductDetails(ID)
--ChiTietTichDiem - UuDaiTichDiem
ALTER TABLE UuDaiTichDiem ADD FOREIGN KEY (IDChiTietTichDiem) REFERENCES ChiTietTichDiem(ID)
--UuDaiTichDiem - TichDiem
ALTER TABLE UuDaiTichDiem ADD FOREIGN KEY (IDTichDiem) REFERENCES TichDiem(ID)
--ProductDetails - Product
ALTER TABLE ProductDetails ADD FOREIGN KEY (IDProduct) REFERENCES Product(ID)
--ProductDetails - Color
ALTER TABLE ProductDetails ADD FOREIGN KEY (IDColor) REFERENCES Color(ID)
--ProductDetails - Size
ALTER TABLE ProductDetails ADD FOREIGN KEY (IDSize) REFERENCES Size(ID)
--Cart - CartDetails
ALTER TABLE Cart ADD FOREIGN KEY (IDCartDetails) REFERENCES CartDetails(ID)
--Cart - KhachHang
ALTER TABLE Cart ADD FOREIGN KEY (IDKhachHang) REFERENCES KhachHang(ID)
--CartDetails - ProductDetails
ALTER TABLE CartDetails ADD FOREIGN KEY (IDProductDetails) REFERENCES ProductDetails(ID)
--KhachHang - TichDiem
ALTER TABLE KhachHang ADD FOREIGN KEY (IDTichDiem) REFERENCES TichDiem(ID)


